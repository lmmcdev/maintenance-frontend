{
  "platform": {
    "apiRuntime": "node:18"
  },
  "navigationFallback": {
    "rewrite": "/index.html",
    "exclude": ["/api/*", "/*.css", "/*.js", "/*.png", "/*.jpg", "/*.ico", "/*.svg"]
  },
  "auth": {
    "identityProviders": {
      "azureActiveDirectory": {
        "registration": {
          "openIdIssuer": "https://login.microsoftonline.com/7313ad10-b885-4b50-9c75-9dbbd975618f/v2.0"
        }
      }
    }
  },
  "routes": [
    { "route": "/login", "redirect": "/.auth/login/aad", "statusCode": 302 },
    { "route": "/logout", "redirect": "/.auth/logout", "statusCode": 302 },

    { "route": "/api/broker", "allowedRoles": ["authenticated"] },

    { "route": "/*", "allowedRoles": ["authenticated"] }
  ],
  "responseOverrides": {
    "401": { "redirect": "/login", "statusCode": 302 },
    "403": { "rewrite": "/403.html", "statusCode": 403 }
  },
  "globalHeaders": {
    "X-Frame-Options": "DENY",
    "X-Content-Type-Options": "nosniff",
    "Referrer-Policy": "strict-origin-when-cross-origin"
  }
}
